e=enumerate
f=lambda g:[[x*(3<(v[j-(j>0):j+2]+w[i-(i>0):i+2]).count(x)<sum(g,g).count(x))for j,(*w,x)in e(zip(*g,v))]for i,v in e(g)]
p=lambda g:f(f(g))